var zkill=function(){var e=new Date();var f=e.getFullYear();var a=e.getMonth()+1;var b="https://zkillboard.com/api/corporationID/"+self.corporation()+"/year/"+f+"/month/"+a+"/";var c=setTimeout(function(){alert("Request Timeout: Failed to get kill data")},8000);$.ajax({url:b,dataType:"jsonp",success:function(g){if(self.killArray().length!==g.length){self.killArray([]);for(var d=0;d<g.length;d++){self.killArray().push(new kill(g[d]))}}clearTimeout(c)}})};var Kill=function(d){var c=this;var b=d;c.kill=ko.observable(false);c.corp=ko.observable(b.victim.corporationID);c.url=ko.observable("http://zkillboard.com/kill/"+b.killID+"/");c.shipPic=ko.observable("http://imageserver.eveonline.com/Render/"+b.victim.shipTypeID+"_128.png");c.atkCorp=ko.observableArray([]);for(var a=0;a<b.attackers.length;a++){c.atkCorp().push({pilotkb:"https://zkillboard.com/character/"+b.attackers[a].characterID+"/",corpPic:"http://imageserver.eveonline.com/Corporation/"+b.attackers[a].corporationID+"_32.png",corp:b.attackers[a].corporationName,pilot:b.attackers[a].characterName,pilotP:"http://imageserver.eveonline.com/Character/"+b.attackers[a].characterID+"_32.jpg",shipPic:"http://imageserver.eveonline.com/Type/"+b.attackers[a].shipTypeID+"_32.png",wepPic:"http://imageserver.eveonline.com/Type/"+b.attackers[a].weaponTypeID+"_32.png",corpKB:"http://zkillboard.com/corporation/"+b.attackers[a].corporationID+"/"})}c.involved=ko.observable(b.attackers.length);c.time=ko.observable(b.killTime);c.vicCorpKB=ko.observable("http://zkillboard.com/corporation/"+b.victim.corporationID+"/");c.isk=ko.observable(Number(b.zkb.totalValue).toLocaleString("en",{minimumFractionDigits:2}));c.kval=ko.observable(b.zkb.totalValue);c.points=ko.observable(b.zkb.points);c.vicCorpUrl=ko.observable("http://imageserver.eveonline.com/Corporation/"+b.victim.corporationID+"_32.png");c.vicPic=ko.observable("http://imageserver.eveonline.com/Character/"+b.victim.characterID+"_128.jpg");if(b.victim.corporationID===self.corporation()){c.kill(false)}else{c.kill(true)}};var ViewModel=function(){var a=this;a.corporation=ko.observable("98270563");a.killArray=ko.observable([]);zkill();$("submit-btn").onClick(zkill());a.won=ko.computed(function(){var c;for(var b=0;b<a.killArray().length;b++){if(a.killArray()[b].kill()){c+=a.killArray()[b].kval()}}return c},this);a.lost=ko.computed(function(){var c;for(var b=0;b<a.killArray().length;b++){if(!a.killArray()[b].kill()){c+=a.killArray()[b].kval()}}return c},this);a.balance=ko.computed(function(){return(a.won()-a.lost())},this)};