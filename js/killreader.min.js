var zkill=function(){var e=new Date();var f=e.getFullYear();var a=e.getMonth()+1;var b="https://zkillboard.com/api/corporationID/"+self.corporation()+"/year/"+f+"/month/"+a+"/";var c=setTimeout(function(){alert("Request Timeout: Failed to get kill data")},8000);$.ajax({url:b,dataType:"jsonp",success:function(d){if(self.killList()!==d){self.killList(d)}else{alert("No new kills")}console.log(self.killList());clearTimeout(c)}})};var Kill=function(d){var c=this;var b=d;c.kill=ko.observable(false);c.corp=ko.observable(b.victim.corporationID);c.url=ko.observable("http://zkillboard.com/kill/"+b.killID+"/");c.shipPic=ko.observable("http://imageserver.eveonline.com/Render/"+b.victim.shipTypeID+"_128.png");c.atkCorp=ko.observableArray([]);for(var a=0;a<b.attackers.length;a++){c.atkCorp().push({pilotkb:"https://zkillboard.com/character/"+b.attackers[a].characterID+"/",corpPic:"http://imageserver.eveonline.com/Corporation/"+b.attackers[a].corporationID+"_32.png",corp:b.attackers[a].corporationName,pilot:b.attackers[a].characterName,pilotP:"http://imageserver.eveonline.com/Character/"+b.attackers[a].characterID+"_32.jpg",shipPic:"http://imageserver.eveonline.com/Type/"+b.attackers[a].shipTypeID+"_32.png",wepPic:"http://imageserver.eveonline.com/Type/"+b.attackers[a].weaponTypeID+"_32.png",corpKB:"http://zkillboard.com/corporation/"+b.attackers[a].corporationID+"/"})}c.involved=ko.observable(b.attackers.length);c.time=ko.observable(b.killTime);c.vicCorpKB=ko.observable("http://zkillboard.com/corporation/"+b.victim.corporationID+"/");c.isk=ko.observable(Number(b.zkb.totalValue).toLocaleString("en",{minimumFractionDigits:2}));c.kval=ko.observable(b.zkb.totalValue);c.points=ko.observable(b.zkb.points);c.vicCorpUrl=ko.observable("http://imageserver.eveonline.com/Corporation/"+b.victim.corporationID+"_32.png");c.vicPic=ko.observable("http://imageserver.eveonline.com/Character/"+b.victim.characterID+"_128.jpg");if(b.victim.corporationID===self.corporation()){c.kill(false)}else{c.kill(true)}};var ViewModel=function(){var b=this;b.killList=ko.observable();b.corporation=ko.observable("98270563");zkill();b.killArray=ko.observable([]);for(var a=0;a<b.killList().length;a++){b.killArray().push(new kill(killList()[a]))}b.won=ko.computed(function(){var d;for(var c=0;c<b.killArray().length;c++){if(b.killArray()[c].kill()){d+=b.killArray()[c].kval()}}return d},this);b.lost=ko.computed(function(){var d;for(var c=0;c<b.killArray().length;c++){if(!b.killArray()[c].kill()){d+=b.killArray()[c].kval()}}return d},this);b.balance=ko.computed(function(){return(b.won()-b.lost())},this)};